$(function(){$setElm=$(".wideslider"),baseWidth=960,baseHeight=420,minWidth=320,slideSpeed=400,delayTime=8e3,easing="linear",autoPlay="0",flickMove="0",btnOpacity=.9,pnOpacity=.9,ua=navigator.userAgent,$(window).load(function(){$setElm.find("img").css({display:"block"}),$setElm.each(function(){function t(){if(windowWidth=$(window).width(),findList=a.find("li"),setParts=$setElm,setWrapLeft=parseInt(a.css("left")),setlistWidth=findList.find("img").width(),setLeft=setWrapLeft/setlistWidth,windowWidth<baseWidth){if(windowWidth>minWidth){findList.css({width:windowWidth});var t=findList.find("img").height();findList.css({height:t}),setParts.css({height:t})}else if(windowWidth<=minWidth){findList.css({width:minWidth});var t=findList.find("img").height();findList.css({height:t}),setParts.css({height:t})}}else windowWidth>=baseWidth&&(findList.css({width:baseWidth,height:baseHeight}),setParts.css({height:baseHeight}));if(setWidth=findList.find("img").width(),setHeight=findList.find("img").height(),baseWrapWidth=setWidth*o,ulCount=a.find("ul").length,1==ulCount){var e=a.children("ul");e.clone().prependTo(a),e.clone().appendTo(a),a.children("ul").eq("1").addClass("mainList");var i=a.find(".mainList").children("li");i.eq("0").addClass("mainActive"),allListCount=a.find("li").length}allLWrapWidth=setWidth*allListCount,posAdjust=(windowWidth-setWidth)/2,s.css({left:posAdjust,width:setWidth,height:setHeight}),n.css({left:-posAdjust,width:posAdjust,height:setHeight,opacity:btnOpacity}),d.css({right:-posAdjust,width:posAdjust,height:setHeight,opacity:btnOpacity}),a.css({width:allLWrapWidth,height:setHeight}),a.children("ul").css({width:baseWrapWidth,height:setHeight}),posResetNext=2*-baseWrapWidth,posResetPrev=-baseWrapWidth+setWidth,adjLeft=setWidth*setLeft,a.css({left:adjLeft})}function e(){wsSetTimer=setInterval(function(){d.click()},delayTime)}function i(){var t=r.find("a.active");t.each(function(){var t=f.index(this),e=a.find(".mainList").children("li");e.removeClass("mainActive").eq(t).addClass("mainActive")})}targetObj=$(this),targetObj.children("ul").wrapAll('<div class="wideslider_base"><div class="wideslider_wrap"></div><div class="slider_prev"></div><div class="slider_next"></div></div>');var s=targetObj.find(".wideslider_base"),a=targetObj.find(".wideslider_wrap"),n=targetObj.find(".slider_prev"),d=targetObj.find(".slider_next"),h=$('<div class="pagination"></div>');targetObj.append(h);var c=a.find("li"),l=a.find("li").children("a"),o=a.find("li").length;c.each(function(t){$(this).css({width:baseWidth,height:baseHeight}),h.append('<a href="javascript:void(0);" class="pn'+(t+1)+'">'+(t+1)+"</a>")});var r=targetObj.find(".pagination");t(),a.css({left:-baseWrapWidth});var f=h.children("a"),p=h.children("a:first"),v=h.children("a:last"),u=h.children("a").length;if(-1!=ua.search(/iPhone/)||-1!=ua.search(/iPad/)||-1!=ua.search(/iPod/)||-1!=ua.search(/Android/)?f.css({opacity:pnOpacity}):f.css({opacity:pnOpacity}).hover(function(){$(this).stop().animate({opacity:"1"},300)},function(){$(this).stop().animate({opacity:pnOpacity},300)}),p.addClass("active"),f.click(function(){"1"==autoPlay&&clearInterval(wsSetTimer);var t=f.index(this),s=setWidth*t+baseWrapWidth;a.stop().animate({left:-s},slideSpeed,easing),f.removeClass("active"),$(this).addClass("active"),i(),"1"==autoPlay&&e()}),"1"==autoPlay&&e(),d.click(function(){a.not(":animated").each(function(){"1"==autoPlay&&clearInterval(wsSetTimer);var t=parseInt($(a).css("left")),s=t-setWidth;a.stop().animate({left:s},slideSpeed,easing,function(){var t=parseInt($(a).css("left"));t<=posResetNext&&a.css({left:-baseWrapWidth})});var n=h.children("a.active");n.each(function(){var t=f.index(this),e=t+1;u==e?(n.removeClass("active"),p.addClass("active")):n.removeClass("active").next().addClass("active")}),i(),"1"==autoPlay&&e()})}).hover(function(){$(this).stop().animate({opacity:btnOpacity+.1},100)},function(){$(this).stop().animate({opacity:btnOpacity},100)}),n.click(function(){a.not(":animated").each(function(){"1"==autoPlay&&clearInterval(wsSetTimer);var t=parseInt($(a).css("left")),s=t+setWidth;a.stop().animate({left:s},slideSpeed,easing,function(){var t=parseInt($(a).css("left")),e=posResetNext+setWidth;t>=posResetPrev&&a.css({left:e})});var n=h.children("a.active");n.each(function(){var t=f.index(this),e=t+1;1==e?(n.removeClass("active"),v.addClass("active")):n.removeClass("active").prev().addClass("active")}),i(),"1"==autoPlay&&e()})}).hover(function(){$(this).stop().animate({opacity:btnOpacity+.1},100)},function(){$(this).stop().animate({opacity:btnOpacity},100)}),$(window).on("resize",function(){"1"==autoPlay&&clearInterval(wsSetTimer),t(),"1"==autoPlay&&e()}).resize(),"1"==flickMove){var g="ontouchstart"in window;a.on({"touchstart mousedown":function(t){a.is(":animated")?t.preventDefault():("1"==autoPlay&&clearInterval(wsSetTimer),-1==ua.search(/iPhone/)&&-1==ua.search(/iPad/)&&-1==ua.search(/iPod/)&&-1==ua.search(/Android/)&&t.preventDefault(),this.pageX=g?event.changedTouches[0].pageX:t.pageX,this.leftBegin=parseInt($(this).css("left")),this.left=parseInt($(this).css("left")),this.touched=!0)},"touchmove mousemove":function(t){this.touched&&(t.preventDefault(),this.left=this.left-(this.pageX-(g?event.changedTouches[0].pageX:t.pageX)),this.pageX=g?event.changedTouches[0].pageX:t.pageX,$(this).css({left:this.left}))},"touchend mouseup mouseout":function(t){if(this.touched){this.touched=!1;var s=h.children("a.active"),n=parseInt(c.css("width")),d=-(n*(o-1));this.leftBegin-30>this.left&&this.leftBegin!==d?($(this).stop().animate({left:this.leftBegin-n},slideSpeed,easing,function(){var t=parseInt($(a).css("left"));t<=posResetNext&&a.css({left:-baseWrapWidth})}),s.each(function(){var t=f.index(this),e=t+1;u==e?(s.removeClass("active"),p.addClass("active")):s.removeClass("active").next().addClass("active")}),i()):this.leftBegin+30<this.left&&0!==this.leftBegin?($(this).stop().animate({left:this.leftBegin+n},slideSpeed,easing,function(){var t=parseInt($(a).css("left")),e=posResetNext+setWidth;t>=posResetPrev&&a.css({left:e})}),s.each(function(){var t=f.index(this),e=t+1;1==e?(s.removeClass("active"),v.addClass("active")):s.removeClass("active").prev().addClass("active")}),i()):$(this).stop().animate({left:this.leftBegin},slideSpeed,easing),compBeginLeft=this.leftBegin,compThisLeft=this.left,l.click(function(t){compBeginLeft!=compThisLeft&&t.preventDefault()}),"1"==autoPlay&&e()}}})}setTimeout(function(){t()},500)})})});